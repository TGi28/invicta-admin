import{_ as b}from"./FieldBase-CJqAS9Xu.js";import{y as F,j as I,J as w,o as c,f as C,w as h,d as p,F as V,p as B,u as l,n as _,h as d,t as P,bf as S,k as v,bw as $,g as M,A as N}from"./vendor-DNNQIDVf.js";import{a as j}from"./main-bEgEWTd2.js";import{u as E}from"./FormBase-DYw9ghXD.js";import{u as L}from"./field-B4hST7Z8.js";/* empty css                  *//* empty css                      *//* empty css             */import"./dynamic-import-helper-BheWnx7M.js";const O=["value","id","checked"],z=["for"],A=["onClick"],Y={__name:"termsField",props:{formId:String,data:Object,path:String},setup(u){const r=u,n=E(r.formId),o=L(r).value([]),i=F(()=>o.value.map(a=>a.id)),k=a=>{let e=parseInt(a.target.value);o.value.length||(o.value=[]),i.value.includes(e)?o.value=o.value.filter(s=>s.id!==e):(console.log("we should push here"),o.value.push({id:e,pivot:{primary:0}}))},m=a=>{let e=o.value.filter(s=>s.id==a)[0];return e?e.pivot.primary==1:!1},g=a=>{o.value=o.value.map(s=>(s.pivot.primary=s.id==a?1:0,s));let e={resource:n.settings.handle,resource_id:n.settings.id,related:r.data.id,term_id:a,sync:[...i.value]};Invicta.axios.post(r.data.options,e)},f=I();return w(()=>{let a=n.settings.handle;Invicta.axios.get(r.data.options,{params:{resource:a,locale:n.settings.currentLocale}}).then(({data:e})=>{console.log("I got this for categories",e),f.value=e})}),(a,e)=>{const s=j,x=N,y=b;return c(),C(y,{"form-id":u.formId,"field-props":r,class:"checkbox-group stacked"},{default:h(()=>[(c(!0),p(V,null,B(l(f),(t,J)=>(c(),p("label",{class:_(["el-checkbox el-checkbox--large !mx-0",{"is-checked":l(i).includes(t.id),primary:m(t.id)}])},[d("span",{class:_(["el-checkbox__input",{"is-checked":l(i).includes(t.id)}])},[d("input",{class:"el-checkbox__original",type:"checkbox",value:t.id,id:`term-${t.id}`,checked:l(i).includes(t.id),onChange:k},null,40,O),e[0]||(e[0]=d("span",{class:"el-checkbox__inner"},null,-1))],2),d("label",{for:`term-${t.id}`,class:"el-checkbox__label"},P(t.title),9,z),u.data.hasPrimary&&l(i).includes(t.id)&&l(n).settings.mode==="edit"?(c(),p("span",{key:0,class:"ml-auto make-primary",onClick:S(R=>g(t.id),["prevent"])},[v(x,{content:m(t.id)?"Primary":"Make Primary",placement:"left"},{default:h(()=>[v(s,{icon:l($),width:16,class:"action-icon"},null,8,["icon"])]),_:2},1032,["content"])],8,A)):M("",!0)],2))),256))]),_:1},8,["form-id","field-props"])}}};export{Y as default};
