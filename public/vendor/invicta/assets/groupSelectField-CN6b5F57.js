import{_ as E}from"./FieldBase-D8sWGY-M.js";import{k as _,o,g as c,w as u,l as D,aq as L,u as l,ap as R,i as b,t as F,e as m,h,F as k,q as B,aH as j,bn as q,aI as C}from"./vendor-Ci2skXiS.js";import"./dropdown-menu-CPFLpZIU.js";import{u as G}from"./FormBase-pZWRLjTf.js";import{u as P}from"./field-CQa3MDSL.js";import"./Loading-BjVsGdfx.js";import"./main-CfCIR4ks.js";/* empty css             */const z={class:"flex justify-between"},H={key:0,class:"opacity-50"},W={__name:"groupSelectField",props:{formId:String,data:Object,path:String},setup(i){var v;const e=i,r=_(!1),f=G(e.formId),g=P(e),p=g.value(),s=_([]),I=e.data.valueField||"value",O=e.data.labelField||"label";if(console.log("initializing the group select field",e.data.id),Array.isArray(e.data.options))s.value=e.data.options,r.value=!0;else if(!((v=e.data.props)!=null&&v.remote)){let a=f.remoteData.get(e.data.options);Array.isArray(a)?(s.value=y(a),r.value=!0,console.log("group options are ready",e.data.id)):(console.log("group options are NOT ready",e.data.id),Invicta.on(e.data.options,()=>{s.value=y(f.remoteData.get(e.data.options)),r.value=!0,console.log("group options are FINALLY ready",e.data.id)}))}function y(a){return e.data.hasOwnProperty("filterBy")?a.filter(d=>e.data.filterBy.includes(d.handle)):a}function V(){Invicta.fetch.get(e.data.options).then(a=>{s.value=a,r.value=!0})}return(a,d)=>{const A=j,N=q,S=C,w=E;return o(),c(w,{"form-id":i.formId,"field-props":e},{default:u(()=>[D(S,L({modelValue:l(p),"onUpdate:modelValue":d[0]||(d[0]=t=>R(p)?p.value=t:null)},i.data.props,{"value-key":i.data.valueKey||null,teleported:!1,"remote-method":V,disabled:l(g).disabled}),{label:u(({label:t,value:n})=>[b("div",z,[b("span",null,F(t),1),n.group?(o(),m("span",H,F(n.group),1)):h("",!0)])]),default:u(()=>[l(r)?(o(!0),m(k,{key:0},B(l(s),t=>(o(),c(N,{key:t.label,label:t.label},{default:u(()=>[(o(!0),m(k,null,B(t.options,(n,x)=>(o(),c(A,{key:x,value:n[l(I)],label:n[l(O)]},null,8,["value","label"]))),128))]),_:2},1032,["label"]))),128)):h("",!0)]),_:1},16,["modelValue","value-key","disabled"])]),_:1},8,["form-id","field-props"])}}};export{W as default};
