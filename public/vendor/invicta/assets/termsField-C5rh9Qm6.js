import{_ as x}from"./FieldBase-DESUYiJo.js";import{y as F,k as I,L as C,o as c,g as V,w as h,e as p,F as w,q as B,u as l,n as _,i as d,t as P,aM as S,l as v,bx as $,h as M,A as L}from"./vendor-Ci2skXiS.js";import{b as N}from"./main-Dz5cwaoL.js";import{u as E}from"./FormBase-CD8slc_B.js";import{u as O}from"./field-XUMtVbvq.js";import"./dropdown-menu-b0znaH5d.js";import"./Loading-BjVsGdfx.js";/* empty css             */const j=["value","id","checked"],q=["for"],z=["onClick"],X={__name:"termsField",props:{formId:String,data:Object,path:String},setup(u){const r=u,n=E(r.formId),o=O(r).value([]),i=F(()=>o.value.map(t=>t.id)),k=t=>{let e=parseInt(t.target.value);o.value.length||(o.value=[]),i.value.includes(e)?o.value=o.value.filter(s=>s.id!==e):(console.log("we should push here"),o.value.push({id:e,pivot:{primary:0}}))},m=t=>{let e=o.value.filter(s=>s.id==t)[0];return e?e.pivot.primary==1:!1},g=t=>{o.value=o.value.map(s=>(s.pivot.primary=s.id==t?1:0,s));let e={resource:n.settings.handle,resource_id:n.settings.id,related:r.data.id,term_id:t,sync:[...i.value]};Invicta.fetch.post(r.data.options,e)},f=I();return C(()=>{let t=n.settings.handle;Invicta.fetch.get(r.data.options,{params:{resource:t,locale:n.settings.currentLocale}}).then(({data:e})=>{console.log("I got this for categories",e),f.value=e})}),(t,e)=>{const s=N,y=L,b=x;return c(),V(b,{"form-id":u.formId,"field-props":r,class:"checkbox-group stacked"},{default:h(()=>[(c(!0),p(w,null,B(l(f),(a,D)=>(c(),p("label",{class:_(["el-checkbox el-checkbox--large !mx-0",{"is-checked":l(i).includes(a.id),primary:m(a.id)}])},[d("span",{class:_(["el-checkbox__input",{"is-checked":l(i).includes(a.id)}])},[d("input",{class:"el-checkbox__original",type:"checkbox",value:a.id,id:`term-${a.id}`,checked:l(i).includes(a.id),onChange:k},null,40,j),e[0]||(e[0]=d("span",{class:"el-checkbox__inner"},null,-1))],2),d("label",{for:`term-${a.id}`,class:"el-checkbox__label"},P(a.title),9,q),u.data.hasPrimary&&l(i).includes(a.id)&&l(n).settings.mode==="edit"?(c(),p("span",{key:0,class:"ml-auto make-primary",onClick:S(R=>g(a.id),["prevent"])},[v(y,{content:m(a.id)?"Primary":"Make Primary",placement:"left"},{default:h(()=>[v(s,{icon:l($),width:16,class:"action-icon"},null,8,["icon"])]),_:2},1032,["content"])],8,z)):M("",!0)],2))),256))]),_:1},8,["form-id","field-props"])}}};export{X as default};
