import{j as E,L as Re,ax as Gt,ay as _t,o as f,f as B,k as b,w as O,l as Kt,h,u as p,i as Qt,e as ze,v as Zt,az as en,aA as xt,an as tn,d as k,n as de,g as I,F as J,aB as nn,t as X,p as fe,r as kt,aC as an,aD as on,W as rn,B as z,aE as sn,a8 as ln,aF as cn,_ as un,aG as Je,aH as Ge,H as dn,aI as St,aJ as $t,aK as pn,D as xe,A as fn,aL as De,ap as Ot,aM as Ct,V as qe,M as Ke,a5 as At,y as Q,a9 as We,aN as vn,aO as mn,aP as gn,ao as Te,aQ as hn,x as yn,aR as bn,aS as wn,Z as _n,aT as xn,aU as kn,ag as Sn,s as Et,aV as Pt,aW as $n,aX as On,aY as Cn,aZ as An,a_ as En,a$ as ft,b0 as Pn,b1 as Dn,b2 as Bn,b3 as In,b4 as jn,b5 as Rn,au as Tn}from"./vendor-BBeuKY12.js";import{a as Vn,c as Ln,d as Fn,_ as Dt}from"./Loading-BOuKvXdY.js";import{b as ke}from"./main-mOMKD1F1.js";const Hn=["id"],dr={__name:"Drawer",props:{style:Object},emits:["close"],setup(e,{emit:n}){const t=n,o=E(!1),a=E(null),r=E();return Re(()=>{r.value=Gt("stack-"),o.value=!0}),_t(a,s=>{s.target.id==r.value&&t("close",!0)}),(s,i)=>(f(),B(xt,{to:"#drawer"},[b(en,{name:"drawer"},{default:O(()=>[Kt(h("div",{class:"overlay",id:p(r)},[h("div",{class:"content",ref_key:"drawerBody",ref:a,style:Qt(e.style)},[ze(s.$slots,"default")],4)],8,Hn),[[Zt,p(o)]])]),_:3})]))}};var G="top",Z="bottom",se="right",ne="left",Qe="auto",Ve=[G,Z,se,ne],ye="start",Ce="end",Mn="clippingParents",Bt="viewport",$e="popper",Un="reference",vt=Ve.reduce(function(e,n){return e.concat([n+"-"+ye,n+"-"+Ce])},[]),Nn=[].concat(Ve,[Qe]).reduce(function(e,n){return e.concat([n,n+"-"+ye,n+"-"+Ce])},[]),zn="beforeRead",qn="read",Wn="afterRead",Yn="beforeMain",Xn="main",Jn="afterMain",Gn="beforeWrite",Kn="write",Qn="afterWrite",Zn=[zn,qn,Wn,Yn,Xn,Jn,Gn,Kn,Qn];function ee(e){return e?(e.nodeName||"").toLowerCase():null}function N(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function pe(e){var n=N(e).Element;return e instanceof n||e instanceof Element}function q(e){var n=N(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function Ze(e){if(typeof ShadowRoot>"u")return!1;var n=N(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function ea(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var o=n.styles[t]||{},a=n.attributes[t]||{},r=n.elements[t];!q(r)||!ee(r)||(Object.assign(r.style,o),Object.keys(a).forEach(function(s){var i=a[s];i===!1?r.removeAttribute(s):r.setAttribute(s,i===!0?"":i)}))})}function ta(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(o){var a=n.elements[o],r=n.attributes[o]||{},s=Object.keys(n.styles.hasOwnProperty(o)?n.styles[o]:t[o]),i=s.reduce(function(l,d){return l[d]="",l},{});!q(a)||!ee(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(l){a.removeAttribute(l)}))})}}const na={name:"applyStyles",enabled:!0,phase:"write",fn:ea,effect:ta,requires:["computeStyles"]};function re(e){return e.split("-")[0]}var ue=Math.max,je=Math.min,be=Math.round;function Ye(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function It(){return!/^((?!chrome|android).)*safari/i.test(Ye())}function we(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!1);var o=e.getBoundingClientRect(),a=1,r=1;n&&q(e)&&(a=e.offsetWidth>0&&be(o.width)/e.offsetWidth||1,r=e.offsetHeight>0&&be(o.height)/e.offsetHeight||1);var s=pe(e)?N(e):window,i=s.visualViewport,l=!It()&&t,d=(o.left+(l&&i?i.offsetLeft:0))/a,u=(o.top+(l&&i?i.offsetTop:0))/r,v=o.width/a,c=o.height/r;return{width:v,height:c,top:u,right:d+v,bottom:u+c,left:d,x:d,y:u}}function jt(e){var n=we(e),t=e.offsetWidth,o=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-o)<=1&&(o=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:o}}function aa(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&Ze(t)){var o=n;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function ae(e){return N(e).getComputedStyle(e)}function oa(e){return["table","td","th"].indexOf(ee(e))>=0}function ie(e){return((pe(e)?e.ownerDocument:e.document)||window.document).documentElement}function Le(e){return ee(e)==="html"?e:e.assignedSlot||e.parentNode||(Ze(e)?e.host:null)||ie(e)}function mt(e){return!q(e)||ae(e).position==="fixed"?null:e.offsetParent}function ra(e){var n=/firefox/i.test(Ye()),t=/Trident/i.test(Ye());if(t&&q(e)){var o=ae(e);if(o.position==="fixed")return null}var a=Le(e);for(Ze(a)&&(a=a.host);q(a)&&["html","body"].indexOf(ee(a))<0;){var r=ae(a);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||n&&r.willChange==="filter"||n&&r.filter&&r.filter!=="none")return a;a=a.parentNode}return null}function Fe(e){for(var n=N(e),t=mt(e);t&&oa(t)&&ae(t).position==="static";)t=mt(t);return t&&(ee(t)==="html"||ee(t)==="body"&&ae(t).position==="static")?n:t||ra(e)||n}function Rt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Be(e,n,t){return ue(e,je(n,t))}function sa(e,n,t){var o=Be(e,n,t);return o>t?t:o}function Tt(){return{top:0,right:0,bottom:0,left:0}}function ia(e){return Object.assign({},Tt(),e)}function la(e,n){return n.reduce(function(t,o){return t[o]=e,t},{})}function _e(e){return e.split("-")[1]}var ca={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ua(e,n){var t=e.x,o=e.y,a=n.devicePixelRatio||1;return{x:be(t*a)/a||0,y:be(o*a)/a||0}}function gt(e){var n,t=e.popper,o=e.popperRect,a=e.placement,r=e.variation,s=e.offsets,i=e.position,l=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,v=e.isFixed,c=s.x,m=c===void 0?0:c,y=s.y,x=y===void 0?0:y,w=typeof u=="function"?u({x:m,y:x}):{x:m,y:x};m=w.x,x=w.y;var _=s.hasOwnProperty("x"),C=s.hasOwnProperty("y"),A=ne,S=G,P=window;if(d){var D=Fe(t),T="clientHeight",V="clientWidth";if(D===N(t)&&(D=ie(t),ae(D).position!=="static"&&i==="absolute"&&(T="scrollHeight",V="scrollWidth")),D=D,a===G||(a===ne||a===se)&&r===Ce){S=Z;var j=v&&D===P&&P.visualViewport?P.visualViewport.height:D[T];x-=j-o.height,x*=l?1:-1}if(a===ne||(a===G||a===Z)&&r===Ce){A=se;var R=v&&D===P&&P.visualViewport?P.visualViewport.width:D[V];m-=R-o.width,m*=l?1:-1}}var H=Object.assign({position:i},d&&ca),U=u===!0?ua({x:m,y:x},N(t)):{x:m,y:x};if(m=U.x,x=U.y,l){var L;return Object.assign({},H,(L={},L[S]=C?"0":"",L[A]=_?"0":"",L.transform=(P.devicePixelRatio||1)<=1?"translate("+m+"px, "+x+"px)":"translate3d("+m+"px, "+x+"px, 0)",L))}return Object.assign({},H,(n={},n[S]=C?x+"px":"",n[A]=_?m+"px":"",n.transform="",n))}function da(e){var n=e.state,t=e.options,o=t.gpuAcceleration,a=o===void 0?!0:o,r=t.adaptive,s=r===void 0?!0:r,i=t.roundOffsets,l=i===void 0?!0:i,d={placement:re(n.placement),variation:_e(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:a,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,gt(Object.assign({},d,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:s,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,gt(Object.assign({},d,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const pa={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:da,data:{}};var Pe={passive:!0};function fa(e){var n=e.state,t=e.instance,o=e.options,a=o.scroll,r=a===void 0?!0:a,s=o.resize,i=s===void 0?!0:s,l=N(n.elements.popper),d=[].concat(n.scrollParents.reference,n.scrollParents.popper);return r&&d.forEach(function(u){u.addEventListener("scroll",t.update,Pe)}),i&&l.addEventListener("resize",t.update,Pe),function(){r&&d.forEach(function(u){u.removeEventListener("scroll",t.update,Pe)}),i&&l.removeEventListener("resize",t.update,Pe)}}const va={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fa,data:{}};var ma={left:"right",right:"left",bottom:"top",top:"bottom"};function Ie(e){return e.replace(/left|right|bottom|top/g,function(n){return ma[n]})}var ga={start:"end",end:"start"};function ht(e){return e.replace(/start|end/g,function(n){return ga[n]})}function et(e){var n=N(e),t=n.pageXOffset,o=n.pageYOffset;return{scrollLeft:t,scrollTop:o}}function tt(e){return we(ie(e)).left+et(e).scrollLeft}function ha(e,n){var t=N(e),o=ie(e),a=t.visualViewport,r=o.clientWidth,s=o.clientHeight,i=0,l=0;if(a){r=a.width,s=a.height;var d=It();(d||!d&&n==="fixed")&&(i=a.offsetLeft,l=a.offsetTop)}return{width:r,height:s,x:i+tt(e),y:l}}function ya(e){var n,t=ie(e),o=et(e),a=(n=e.ownerDocument)==null?void 0:n.body,r=ue(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=ue(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),i=-o.scrollLeft+tt(e),l=-o.scrollTop;return ae(a||t).direction==="rtl"&&(i+=ue(t.clientWidth,a?a.clientWidth:0)-r),{width:r,height:s,x:i,y:l}}function nt(e){var n=ae(e),t=n.overflow,o=n.overflowX,a=n.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+o)}function Vt(e){return["html","body","#document"].indexOf(ee(e))>=0?e.ownerDocument.body:q(e)&&nt(e)?e:Vt(Le(e))}function Oe(e,n){var t;n===void 0&&(n=[]);var o=Vt(e),a=o===((t=e.ownerDocument)==null?void 0:t.body),r=N(o),s=a?[r].concat(r.visualViewport||[],nt(o)?o:[]):o,i=n.concat(s);return a?i:i.concat(Oe(Le(s)))}function Xe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ba(e,n){var t=we(e,!1,n==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function yt(e,n,t){return n===Bt?Xe(ha(e,t)):pe(n)?ba(n,t):Xe(ya(ie(e)))}function wa(e){var n=Oe(Le(e)),t=["absolute","fixed"].indexOf(ae(e).position)>=0,o=t&&q(e)?Fe(e):e;return pe(o)?n.filter(function(a){return pe(a)&&aa(a,o)&&ee(a)!=="body"}):[]}function _a(e,n,t,o){var a=n==="clippingParents"?wa(e):[].concat(n),r=[].concat(a,[t]),s=r[0],i=r.reduce(function(l,d){var u=yt(e,d,o);return l.top=ue(u.top,l.top),l.right=je(u.right,l.right),l.bottom=je(u.bottom,l.bottom),l.left=ue(u.left,l.left),l},yt(e,s,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Lt(e){var n=e.reference,t=e.element,o=e.placement,a=o?re(o):null,r=o?_e(o):null,s=n.x+n.width/2-t.width/2,i=n.y+n.height/2-t.height/2,l;switch(a){case G:l={x:s,y:n.y-t.height};break;case Z:l={x:s,y:n.y+n.height};break;case se:l={x:n.x+n.width,y:i};break;case ne:l={x:n.x-t.width,y:i};break;default:l={x:n.x,y:n.y}}var d=a?Rt(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(r){case ye:l[d]=l[d]-(n[u]/2-t[u]/2);break;case Ce:l[d]=l[d]+(n[u]/2-t[u]/2);break}}return l}function at(e,n){n===void 0&&(n={});var t=n,o=t.placement,a=o===void 0?e.placement:o,r=t.strategy,s=r===void 0?e.strategy:r,i=t.boundary,l=i===void 0?Mn:i,d=t.rootBoundary,u=d===void 0?Bt:d,v=t.elementContext,c=v===void 0?$e:v,m=t.altBoundary,y=m===void 0?!1:m,x=t.padding,w=x===void 0?0:x,_=ia(typeof w!="number"?w:la(w,Ve)),C=c===$e?Un:$e,A=e.rects.popper,S=e.elements[y?C:c],P=_a(pe(S)?S:S.contextElement||ie(e.elements.popper),l,u,s),D=we(e.elements.reference),T=Lt({reference:D,element:A,strategy:"absolute",placement:a}),V=Xe(Object.assign({},A,T)),j=c===$e?V:D,R={top:P.top-j.top+_.top,bottom:j.bottom-P.bottom+_.bottom,left:P.left-j.left+_.left,right:j.right-P.right+_.right},H=e.modifiersData.offset;if(c===$e&&H){var U=H[a];Object.keys(R).forEach(function(L){var K=[se,Z].indexOf(L)>=0?1:-1,te=[G,Z].indexOf(L)>=0?"y":"x";R[L]+=U[te]*K})}return R}function xa(e,n){n===void 0&&(n={});var t=n,o=t.placement,a=t.boundary,r=t.rootBoundary,s=t.padding,i=t.flipVariations,l=t.allowedAutoPlacements,d=l===void 0?Nn:l,u=_e(o),v=u?i?vt:vt.filter(function(y){return _e(y)===u}):Ve,c=v.filter(function(y){return d.indexOf(y)>=0});c.length===0&&(c=v);var m=c.reduce(function(y,x){return y[x]=at(e,{placement:x,boundary:a,rootBoundary:r,padding:s})[re(x)],y},{});return Object.keys(m).sort(function(y,x){return m[y]-m[x]})}function ka(e){if(re(e)===Qe)return[];var n=Ie(e);return[ht(e),n,ht(n)]}function Sa(e){var n=e.state,t=e.options,o=e.name;if(!n.modifiersData[o]._skip){for(var a=t.mainAxis,r=a===void 0?!0:a,s=t.altAxis,i=s===void 0?!0:s,l=t.fallbackPlacements,d=t.padding,u=t.boundary,v=t.rootBoundary,c=t.altBoundary,m=t.flipVariations,y=m===void 0?!0:m,x=t.allowedAutoPlacements,w=n.options.placement,_=re(w),C=_===w,A=l||(C||!y?[Ie(w)]:ka(w)),S=[w].concat(A).reduce(function(he,oe){return he.concat(re(oe)===Qe?xa(n,{placement:oe,boundary:u,rootBoundary:v,padding:d,flipVariations:y,allowedAutoPlacements:x}):oe)},[]),P=n.rects.reference,D=n.rects.popper,T=new Map,V=!0,j=S[0],R=0;R<S.length;R++){var H=S[R],U=re(H),L=_e(H)===ye,K=[G,Z].indexOf(U)>=0,te=K?"width":"height",M=at(n,{placement:H,boundary:u,rootBoundary:v,altBoundary:c,padding:d}),g=K?L?se:ne:L?Z:G;P[te]>D[te]&&(g=Ie(g));var $=Ie(g),F=[];if(r&&F.push(M[U]<=0),i&&F.push(M[g]<=0,M[$]<=0),F.every(function(he){return he})){j=H,V=!1;break}T.set(H,F)}if(V)for(var W=y?3:1,ve=function(oe){var Se=S.find(function(Ae){var le=T.get(Ae);if(le)return le.slice(0,oe).every(function(He){return He})});if(Se)return j=Se,"break"},me=W;me>0;me--){var ge=ve(me);if(ge==="break")break}n.placement!==j&&(n.modifiersData[o]._skip=!0,n.placement=j,n.reset=!0)}}const $a={name:"flip",enabled:!0,phase:"main",fn:Sa,requiresIfExists:["offset"],data:{_skip:!1}};function Oa(e){var n=e.state,t=e.name;n.modifiersData[t]=Lt({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}const Ca={name:"popperOffsets",enabled:!0,phase:"read",fn:Oa,data:{}};function Aa(e){return e==="x"?"y":"x"}function Ea(e){var n=e.state,t=e.options,o=e.name,a=t.mainAxis,r=a===void 0?!0:a,s=t.altAxis,i=s===void 0?!1:s,l=t.boundary,d=t.rootBoundary,u=t.altBoundary,v=t.padding,c=t.tether,m=c===void 0?!0:c,y=t.tetherOffset,x=y===void 0?0:y,w=at(n,{boundary:l,rootBoundary:d,padding:v,altBoundary:u}),_=re(n.placement),C=_e(n.placement),A=!C,S=Rt(_),P=Aa(S),D=n.modifiersData.popperOffsets,T=n.rects.reference,V=n.rects.popper,j=typeof x=="function"?x(Object.assign({},n.rects,{placement:n.placement})):x,R=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),H=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,U={x:0,y:0};if(D){if(r){var L,K=S==="y"?G:ne,te=S==="y"?Z:se,M=S==="y"?"height":"width",g=D[S],$=g+w[K],F=g-w[te],W=m?-V[M]/2:0,ve=C===ye?T[M]:V[M],me=C===ye?-V[M]:-T[M],ge=n.elements.arrow,he=m&&ge?jt(ge):{width:0,height:0},oe=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Tt(),Se=oe[K],Ae=oe[te],le=Be(0,T[M],he[M]),He=A?T[M]/2-W-le-Se-R.mainAxis:ve-le-Se-R.mainAxis,zt=A?-T[M]/2+W+le+Ae+R.mainAxis:me+le+Ae+R.mainAxis,Me=n.elements.arrow&&Fe(n.elements.arrow),qt=Me?S==="y"?Me.clientTop||0:Me.clientLeft||0:0,ot=(L=H==null?void 0:H[S])!=null?L:0,Wt=g+He-ot-qt,Yt=g+zt-ot,rt=Be(m?je($,Wt):$,g,m?ue(F,Yt):F);D[S]=rt,U[S]=rt-g}if(i){var st,Xt=S==="x"?G:ne,Jt=S==="x"?Z:se,ce=D[P],Ee=P==="y"?"height":"width",it=ce+w[Xt],lt=ce-w[Jt],Ue=[G,ne].indexOf(_)!==-1,ct=(st=H==null?void 0:H[P])!=null?st:0,ut=Ue?it:ce-T[Ee]-V[Ee]-ct+R.altAxis,dt=Ue?ce+T[Ee]+V[Ee]-ct-R.altAxis:lt,pt=m&&Ue?sa(ut,ce,dt):Be(m?ut:it,ce,m?dt:lt);D[P]=pt,U[P]=pt-ce}n.modifiersData[o]=U}}const Pa={name:"preventOverflow",enabled:!0,phase:"main",fn:Ea,requiresIfExists:["offset"]};function Da(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ba(e){return e===N(e)||!q(e)?et(e):Da(e)}function Ia(e){var n=e.getBoundingClientRect(),t=be(n.width)/e.offsetWidth||1,o=be(n.height)/e.offsetHeight||1;return t!==1||o!==1}function ja(e,n,t){t===void 0&&(t=!1);var o=q(n),a=q(n)&&Ia(n),r=ie(n),s=we(e,a,t),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!t)&&((ee(n)!=="body"||nt(r))&&(i=Ba(n)),q(n)?(l=we(n,!0),l.x+=n.clientLeft,l.y+=n.clientTop):r&&(l.x=tt(r))),{x:s.left+i.scrollLeft-l.x,y:s.top+i.scrollTop-l.y,width:s.width,height:s.height}}function Ra(e){var n=new Map,t=new Set,o=[];e.forEach(function(r){n.set(r.name,r)});function a(r){t.add(r.name);var s=[].concat(r.requires||[],r.requiresIfExists||[]);s.forEach(function(i){if(!t.has(i)){var l=n.get(i);l&&a(l)}}),o.push(r)}return e.forEach(function(r){t.has(r.name)||a(r)}),o}function Ta(e){var n=Ra(e);return Zn.reduce(function(t,o){return t.concat(n.filter(function(a){return a.phase===o}))},[])}function Va(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}function La(e){var n=e.reduce(function(t,o){var a=t[o.name];return t[o.name]=a?Object.assign({},a,o,{options:Object.assign({},a.options,o.options),data:Object.assign({},a.data,o.data)}):o,t},{});return Object.keys(n).map(function(t){return n[t]})}var bt={placement:"bottom",modifiers:[],strategy:"absolute"};function wt(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Fa(e){e===void 0&&(e={});var n=e,t=n.defaultModifiers,o=t===void 0?[]:t,a=n.defaultOptions,r=a===void 0?bt:a;return function(i,l,d){d===void 0&&(d=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},bt,r),modifiersData:{},elements:{reference:i,popper:l},attributes:{},styles:{}},v=[],c=!1,m={state:u,setOptions:function(_){var C=typeof _=="function"?_(u.options):_;x(),u.options=Object.assign({},r,u.options,C),u.scrollParents={reference:pe(i)?Oe(i):i.contextElement?Oe(i.contextElement):[],popper:Oe(l)};var A=Ta(La([].concat(o,u.options.modifiers)));return u.orderedModifiers=A.filter(function(S){return S.enabled}),y(),m.update()},forceUpdate:function(){if(!c){var _=u.elements,C=_.reference,A=_.popper;if(wt(C,A)){u.rects={reference:ja(C,Fe(A),u.options.strategy==="fixed"),popper:jt(A)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var P=u.orderedModifiers[S],D=P.fn,T=P.options,V=T===void 0?{}:T,j=P.name;typeof D=="function"&&(u=D({state:u,options:V,name:j,instance:m})||u)}}}},update:Va(function(){return new Promise(function(w){m.forceUpdate(),w(u)})}),destroy:function(){x(),c=!0}};if(!wt(i,l))return m;m.setOptions(d).then(function(w){!c&&d.onFirstUpdate&&d.onFirstUpdate(w)});function y(){u.orderedModifiers.forEach(function(w){var _=w.name,C=w.options,A=C===void 0?{}:C,S=w.effect;if(typeof S=="function"){var P=S({state:u,name:_,instance:m,options:A}),D=function(){};v.push(P||D)}})}function x(){v.forEach(function(w){return w()}),v=[]}return m}}var Ha=[va,Ca,pa,na],Ma=Fa({defaultModifiers:Ha});const Ua=["aria-expanded"],Na={class:"popover-content"},Ft={__name:"Popover",props:{disabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom-end"}},setup(e){const n=e,t=E(!1),o=E(),a=E();let r;Re(()=>{n.disabled||d()});const s=()=>{t.value=!0,r.update()},i=()=>t.value=!1,l=()=>t.value?i():s();tn("esc",u=>{u.preventDefault(),i()});function d(){r=Ma(o.value,a.value,{placement:n.placement,modifiers:[$a,Pa]})}return _t(a,()=>i()),(u,v)=>(f(),k(J,null,[h("div",{onClick:l,ref_key:"trigger",ref:o,class:"popover-trigger","aria-haspopup":"true","aria-expanded":p(t)},[ze(u.$slots,"trigger")],8,Ua),(f(),B(xt,{to:"#poppers"},[e.disabled?I("",!0):(f(),k("div",{key:0,ref_key:"popover",ref:a,class:de(["popover",{open:p(t)}])},[h("div",Na,[ze(u.$slots,"default",{close:i})])],2))]))],64))}},za={class:"actions-popover flex items-center"},qa={title:"More actions",class:"action-icon"},Wa={class:"text-center my-2 opacity-60"},Ya=["onClick"],Xa={key:0,class:"divider"},Ja={__name:"ActionsDropdown",props:{actions:Array,item:Number|Object,title:String},emits:["close","selected"],setup(e,{emit:n}){const t=e,o=n,a=r=>{console.log("inside actions dropdown",r);let s="action"in r?r.action:r;o("selected",{action:s,item:t.item})};return(r,s)=>{const i=ke,l=Ft;return f(),k("div",za,[b(l,null,{trigger:O(()=>[h("span",qa,[b(i,{icon:p(nn),width:18},null,8,["icon"])])]),default:O(({close:d})=>[e.title?(f(),k(J,{key:0},[h("p",Wa,X(e.title),1),s[0]||(s[0]=h("div",{class:"divider"},null,-1))],64)):I("",!0),h("ul",null,[(f(!0),k(J,null,fe(e.actions,u=>(f(),k(J,null,[h("li",{onClick:v=>{a(u),d()},class:de(["el-dropdown-menu__item",{danger:u.danger}])},X(u.name),11,Ya),u.divider?(f(),k("li",Xa)):I("",!0)],64))),256))])]),_:1})])}}},Ga={class:"actions flex items-center justify-end"},Ka={__name:"RowActions",props:{id:Number,resourceHandle:String,actions:Array,hasDetail:Boolean,canEdit:Boolean,canDelete:Boolean},setup(e){const n=e,t=o=>{console.log("action call",o),Invicta.emit("action-called",{action:o.action,selected:[n.id]})};return(o,a)=>{const r=Ja,s=ke,i=kt("router-link");return f(),k("div",Ga,[e.actions.length?(f(),B(r,{key:0,actions:e.actions,item:e.id,onSelected:t,class:"mr-2"},null,8,["actions","item"])):I("",!0),e.hasDetail?(f(),B(i,{key:1,to:{name:"resourceDetail",params:{id:e.id,handle:e.resourceHandle}},class:"action-icon"},{default:O(()=>[b(s,{icon:p(an)},null,8,["icon"])]),_:1},8,["to"])):I("",!0),e.canEdit?(f(),B(i,{key:2,to:{name:"resourceEdit",params:{id:e.id,handle:e.resourceHandle}},class:"action-icon"},{default:O(()=>[b(s,{icon:p(on)},null,8,["icon"])]),_:1},8,["to"])):I("",!0),e.canDelete?(f(),k("span",{key:3,class:"action-icon",onClick:a[0]||(a[0]=l=>o.$emit("delete",[e.id])),title:"Delete Item"},[b(s,{icon:p(rn)},null,8,["icon"])])):I("",!0)])}}},Qa={class:"table-settings flex p-4"},Za={class:"settings pr-4"},eo={class:"columns pl-4"},to={__name:"TableSettings",props:{treeModel:Array,tableProps:Object},setup(e){return(n,t)=>{const o=ln,a=cn,r=un,s=Je,i=Ge,l=Vn,d=dn;return f(),B(d,{trigger:"click",class:"!align-middle",teleported:""},{dropdown:O(()=>[h("div",Qa,[h("div",Za,[t[9]||(t[9]=h("h4",{class:"mb-1"},"Settings",-1)),b(r,null,{default:O(()=>[b(a,{modelValue:e.tableProps.stripe,"onUpdate:modelValue":t[0]||(t[0]=u=>e.tableProps.stripe=u)},{default:O(()=>t[3]||(t[3]=[z("Striped")])),_:1},8,["modelValue"])]),_:1}),b(r,null,{default:O(()=>[b(a,{modelValue:e.tableProps.border,"onUpdate:modelValue":t[1]||(t[1]=u=>e.tableProps.border=u)},{default:O(()=>t[4]||(t[4]=[z("Border")])),_:1},8,["modelValue"])]),_:1}),b(r,null,{default:O(()=>[t[8]||(t[8]=h("label",null,"Size",-1)),b(i,{modelValue:e.tableProps.size,"onUpdate:modelValue":t[2]||(t[2]=u=>e.tableProps.size=u),placeholder:"Size"},{default:O(()=>[b(s,{value:"small"},{default:O(()=>t[5]||(t[5]=[z("Small")])),_:1}),b(s,{value:"default"},{default:O(()=>t[6]||(t[6]=[z("Default")])),_:1}),b(s,{value:"large"},{default:O(()=>t[7]||(t[7]=[z("Large")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),h("div",eo,[t[10]||(t[10]=h("h4",{class:"mb-1"},"Columns",-1)),b(l,{"initial-items":e.treeModel,disabled:!1,depth:1},null,8,["initial-items"])])])]),default:O(()=>[b(o,{class:"action-icon"},{default:O(()=>[b(p(sn))]),_:1})]),_:1})}}},no=["innerHTML"],ao=["innerHTML"],oo={__name:"CopyText",props:{text:String|Number,canCopy:Boolean},setup(e){const n=e,{copy:t,copied:o,isSupported:a}=St();function r(){Invicta.message({type:"success",title:"Copied to clipboard!"})}function s(){const i=/.+class=".*copy[^\>]+>([^\<]+)<\//;let l=n.text.match(i),d=n.text.replace(/<[^>]*>/g,"");return l&&l[1]&&(d=l[1].replace(/<[^>]*>/g,"")),d}return(i,l)=>{const d=xe,u=fn;return e.canCopy&&p(a)?(f(),B(u,{key:0,effect:"light",placement:"left"},{content:O(()=>[p(o)?(f(),B(d,{key:1,icon:p(pn),type:"success",onClick:l[1]||(l[1]=v=>o.value=!1)},null,8,["icon"])):(f(),B(d,{key:0,icon:p($t),onClick:l[0]||(l[0]=v=>{p(t)(s()),r()}),title:"Click to copy to clipboard"},null,8,["icon"]))]),default:O(()=>[h("div",{innerHTML:e.text},null,8,no)]),_:1})):(f(),k("div",{key:1,innerHTML:e.text},null,8,ao))}}},ro={key:1},so=["onClick"],io={class:"edit-link"},lo={class:"edit-link"},co={key:5},uo={__name:"Column",props:{id:String,props:Object,canEdit:Boolean,hasDetail:Boolean},setup(e){const n=(a,r=!1)=>a.boolean?"center":r?a.headerAlign:a.align;function t(a,r){return Array.isArray(a)?a.map(s=>s[r]).join(", "):typeof a=="object"?a[r]:a}function o(a,r){let s=a.split("/");return s.length&&(s.forEach((i,l)=>{if(i.includes(":")){let d=i.substring(1),u=r[d]??null;u&&(s[l]=u)}}),s=s.join("/")),s}return(a,r)=>{const s=oo,i=kt("router-link"),l=Ct;return f(),B(l,Ot({prop:e.id},e.props,{align:n(e.props),"header-align":n(e.props,!0),sortable:e.props.sortable?"custom":!1,"column-key":e.props.editLink||e.props.customLink?"no-select":null}),{default:O(d=>[e.props.boolean?(f(),k("i",{key:0,class:de(["icon-status",{success:d.row[e.id]}])},null,2)):e.props.list?(f(),k("div",ro,X(t(d.row[e.id],e.props.titleField)),1)):e.props.editLink&&e.canEdit?(f(),k("div",{key:2,onClick:De(u=>a.$emit("edit",d.row.id),["prevent"]),class:"edit-link"},[b(s,{text:d.row[e.id],"can-copy":e.props.canCopy},null,8,["text","can-copy"])],8,so)):e.props.customLink&&e.canEdit?(f(),B(i,{key:3,to:o(e.props.customLink,d.row)},{default:O(()=>[h("span",io,[b(s,{text:d.row[e.id],"can-copy":e.props.canCopy},null,8,["text","can-copy"])])]),_:2},1032,["to"])):e.props.detailLink&&e.hasDetail?(f(),B(i,{key:4,to:{name:"resourceDetail",params:{id:d.row.id}}},{default:O(()=>[h("span",lo,[b(s,{text:d.row[e.id],"can-copy":e.props.canCopy},null,8,["text","can-copy"])])]),_:2},1032,["to"])):(f(),k("div",co,[b(s,{text:d.row[e.id],"can-copy":e.props.canCopy},null,8,["text","can-copy"])]))]),_:1},16,["prop","align","header-align","sortable","column-key"])}}},po={class:"resource-table"},Ht={__name:"ResourceTable",props:{resourceHandle:String,data:Array,tableProps:Object,columns:Object,canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},hasDetail:{type:Boolean,default:!1},noActions:{type:Boolean,default:!1},singleSelect:{type:Boolean,default:!1},noSelect:{type:Boolean,default:!1},columnsSelect:{type:Boolean,default:!0}},setup(e,{expose:n}){const t=e,o=E(),a=E([]),r=qe(JSON.parse(Invicta.remember("table-settings"))??t.tableProps);Ke(r,v=>{Invicta.remember("table-settings",JSON.stringify(v))});let s=At(t.columns,(v,c)=>({label:v.label,value:c,checked:!v.hidden}));a.value=t.columnsSelect&&JSON.parse(Invicta.remember(`${t.resourceHandle}-index-columns`))||s;const i=Q(()=>{let v=Ln(a.value);return t.columnsSelect&&Invicta.remember(`${t.resourceHandle}-index-columns`,JSON.stringify(a.value)),We(t.columns,(c,m)=>v.includes(m))});r.value=JSON.parse(Invicta.remember(`${t.tableProps}`));const l=({prop:v,order:c})=>{console.log("before sort event",v,c),Invicta.emit("sort-change",{prop:v,order:c})},d=(v,c,m)=>{!c.columnKey&&c.columnKey!="no-select"&&o.value.toggleRowSelection(v,void 0)};return n({clearSelection:()=>{o.value.clearSelection()}}),(v,c)=>{const m=Ct,y=uo,x=to,w=Ka,_=mn;return f(),k("div",po,[b(_,Ot({ref_key:"resourceTableRef",ref:o,data:e.data},p(r),{"highlight-current-row":"",onSelectionChange:c[2]||(c[2]=C=>v.$emit("select",C)),onCurrentChange:c[3]||(c[3]=C=>v.$emit("single-select",C)),onSortChange:l,onRowClick:d}),{default:O(()=>[!e.singleSelect&&!e.noSelect?(f(),B(m,{key:0,type:"selection",fixed:""})):I("",!0),(f(!0),k(J,null,fe(p(i),(C,A)=>(f(),B(y,{id:A,props:C,"can-edit":e.canEdit,"has-detail":e.hasDetail,onEdit:c[0]||(c[0]=S=>v.$emit("edit",S))},null,8,["id","props","can-edit","has-detail"]))),256)),e.noActions?I("",!0):(f(),B(m,{key:1,width:"100","header-align":"right","column-key":"no-select",fixed:"right"},vn({default:O(C=>[b(w,{id:C.row.id,"resource-handle":e.resourceHandle,actions:C.row.actions||[],"can-edit":e.canEdit,"can-delete":e.canDelete,"has-detail":e.hasDetail,onDelete:c[1]||(c[1]=A=>v.$emit("delete",A))},null,8,["id","resource-handle","actions","can-edit","can-delete","has-detail"])]),_:2},[e.columnsSelect?{name:"header",fn:O(()=>[b(x,{"tree-model":p(a),"table-props":p(r)},null,8,["tree-model","table-props"])]),key:"0"}:void 0]),1024))]),_:1},16,["data"])])}}},fo={__name:"FilterBadges",props:{badges:Object},setup(e){const n=e,t=Q(()=>At(n.badges,(a,r)=>{let s=Array.isArray(a.value)?a.value.join(", "):a.value;return{handle:r,badge:`${a.name}: ${s}`}})),o=a=>Invicta.emit("remove-filter",a);return(a,r)=>{const s=gn;return f(!0),k(J,null,fe(p(t),(i,l)=>(f(),B(s,{key:l,class:"mx-1",closable:"",onClose:d=>o(i.handle)},{default:O(()=>[z(X(i.badge),1)]),_:2},1032,["onClose"]))),128)}}},vo={__name:"DateFilter",props:{handle:String,resourceHandle:String,type:String,initialValue:Array},emits:["selected"],setup(e,{emit:n}){const t=e,o=n,a=E(t.initialValue),r=()=>{let s={};s[t.handle]=a.value,Invicta.emit("update-filters",{filter:s,handle:t.resourceHandle}),o("selected")};return Invicta.on("remove-filter",s=>{s==t.handle&&(a.value=[],r())}),Invicta.on("clear-filters",()=>{a.value=[]}),(s,i)=>{const l=hn;return f(),B(l,{modelValue:p(a),"onUpdate:modelValue":i[0]||(i[0]=d=>Te(a)?a.value=d:null),type:e.type,"value-format":"YYYY-MM-DD",onChange:r},null,8,["modelValue","type"])}}},mo={__name:"SelectFilter",props:{filterOptions:Array,handle:String,resourceHandle:String,initialValue:String|Object,remote:Boolean},emits:["selected"],setup(e,{emit:n}){const t=e,o=n,a=E(t.initialValue),r=E(t.filterOptions),s=l=>{let d={handle:t.handle,search:l};Invicta.axios.get("api/fields/filter/options",{params:d}).then(({data:u})=>{console.log("got results for options",u),r.value=u})},i=()=>{let l={};l[t.handle]=a.value,console.log("this is my value",a.value,l),Invicta.emit("update-filters",{filter:l,handle:t.resourceHandle}),o("selected")};return Invicta.on("remove-filter",l=>{l==t.handle&&(a.value="",i())}),Invicta.on("clear-filters",()=>{a.value=""}),(l,d)=>{const u=Je,v=Ge;return f(),B(v,{modelValue:p(a),"onUpdate:modelValue":d[0]||(d[0]=c=>Te(a)?a.value=c:null),clearable:"","collapse-tags":"",filterable:e.remote,remote:e.remote,"remote-method":s,"value-key":e.remote?"id":null,placeholder:"Select",teleported:!1,onChange:i},{default:O(()=>[(f(!0),k(J,null,fe(p(r),(c,m)=>(f(),B(u,{key:m,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","filterable","remote","value-key"])}}},go={class:"p-3"},ho={__name:"Filters",props:{resourceHandle:String,filters:Array,activeFilters:Object},setup(e){yn(a=>({"8f771d6c":p(t)}));const n=e,t=Q(()=>Object.keys(n.activeFilters).length?"var(--el-color-primary)":"var(--el-text-color-regular)"),o=a=>a in n.activeFilters?"active-filter":"";return(a,r)=>{const s=ke,i=xe,l=mo,d=vo,u=Ft;return f(),B(u,null,{trigger:O(()=>[b(i,{class:"filter-state"},{default:O(()=>[b(s,{icon:p(bn),width:18,height:18},null,8,["icon"])]),_:1})]),default:O(v=>[h("div",go,[(f(!0),k(J,null,fe(e.filters,c=>(f(),k(J,null,[h("h4",{class:de(["mb-1",o(c.class)])},X(c.name),3),c.type=="select"?(f(),B(l,{key:0,class:"mb-4",handle:c.class,"resource-handle":e.resourceHandle,remote:c.remote,"filter-options":c.options,"initial-value":c.initialValue,onSelected:m=>v.close()},null,8,["handle","resource-handle","remote","filter-options","initial-value","onSelected"])):I("",!0),c.type=="date"||c.type=="daterange"?(f(),B(d,{key:1,handle:c.class,"resource-handle":e.resourceHandle,type:c.type,"initial-value":c.initialValue==""?[]:c.initialValue,onSelected:m=>v.close()},null,8,["handle","resource-handle","type","initial-value","onSelected"])):I("",!0)],64))),256))])]),_:1})}}},Mt={__name:"Search",props:{currentSearch:{type:String,default:""},searchStrings:{type:Object,default:()=>({placeholder:"Search",title:"Type to search"})}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,a=E(t.currentSearch);return Ke(a,Fn(r=>{console.log("debouncing works",r),o("update",r)},400)),(r,s)=>{const i=_n;return f(),B(i,{modelValue:p(a),"onUpdate:modelValue":s[0]||(s[0]=l=>Te(a)?a.value=l:null),clearable:"",placeholder:e.searchStrings.placeholder,title:e.searchStrings.title,"prefix-icon":p(wn),size:"large",onClear:s[1]||(s[1]=l=>a.value="")},null,8,["modelValue","placeholder","title","prefix-icon"])}}},Y=window.Invicta,Ne=new Map,yo=(e,n)=>{let t=`resource-${e}`;return Ne.has(t)||Ne.set(t,n),Ne.get(t)},Ut=e=>{const n=e,t=E(""),o=E([]),a=yo(e,qe({settings:null,filters:null,actions:null})),r=E(""),s=E(1),i=E(),l=E(),d=E(),u=E(0),v=E(""),c=E({}),m=E([]);E({}),E({});const y=E(!1),x=E(null),w=E(!1);let _=Y.remember("per-page-size");_&&(i.value=parseInt(_));const C=g=>{console.log("see you change locale",g,t,n),r.value=g,s.value=1},A=g=>{console.log("see that you want to change page",s.value,g),s.value=g},S=g=>{console.log("changing page size",i.value,g),Y.remember("per-page-size",g),i.value=g},P=(g,$)=>{$?(l.value=$=="ascending"?"asc":"desc",d.value=g):(d.value=null,l.value=null)};Y.on("sort-change",({prop:g,order:$})=>{console.log("we have sort event",g,$),P(g,$)});const D=g=>{s.value=1,v.value=g,console.log("I get some searching",g,R)},T=({filter:g,handle:$})=>{for(const[F,W]of Object.entries(g))typeof W=="string"&&W===""?delete c.value[F]:c.value={...c.value,...g};s.value=1};Y.on("update-filters",T);const V=Q(()=>Object.keys(c.value).length?btoa(JSON.stringify(c.value)):null),j=()=>{s.value=1,c.value={}},R=Q(()=>({page:s.value,per_page:i.value,sort_by:d.value,sort_order:l.value,search:v.value,filters:V.value,locale:r.value}));Ke(R,()=>{console.log("Something changed in requestQuery",R),L()});function H(g){let $=!0;a.settings&&(console.log("Ive been here already"),Y.pageTitle(a.settings.title)),console.log("1. init Index",g.path),t.value=`api${g.path}`,g.query.search&&(v.value=g.query.search,$=!1),g.query.page&&(s.value=Number(g.query.page),$=!1),g.query.filters&&(c.value=JSON.parse(atob(g.query.filters)),$=!1),g.query.sort_by&&g.query.sort_order&&(P(g.query.sort_by,g.query.sort_order),$=!1),$&&L(),K(),te()}function U(g,$){console.log("we are startin a form",e,a),y.value=!0,t.value=g,s.value=$.meta.current_page,o.value=$.data,u.value=$.meta.total,m.value=$.meta.filterBadges,x.value=$.params,$.meta.settings&&(a.settings={...$.meta.settings})}function L(){w.value=!0;let g=We(R.value,($,F)=>{if($)return F=="page"?$>1:!0});console.log("2. I should change",t.value,R.value),y.value?(g=x.value?{...g,...x.value}:g,console.log("3. this if form with possible params",g)):(console.log("3. I have this query",g),Y.router.replace({query:g})),a.settings||(g.settings=!0),Y.axios.get(t.value,{params:g}).then(({data:$})=>{console.log("4. got some new data",$),o.value=$.data,u.value=$.meta.total,m.value=$.meta.filterBadges,$.meta.settings&&(a.settings=$.meta.settings,Y.pageTitle($.meta.settings.title)),w.value=!1})}function K(g=null){if(a.filters===null){let $=g?`api/resource/${g}/filters`:`${t.value}/filters`;Y.axios.get($).then(({data:F})=>{F.length?a.filters=F.map(W=>{let ve="";return Object.keys(c.value).length&&(ve=kn(c.value,(me,ge)=>W.class==ge)[0]),W.initialValue=ve,W}):a.filters=!1})}}function te(){a.actions===null&&Y.axios.get(`${t.value}/actions`).then(({data:g})=>{g.length?a.actions=g.reduce(($,F)=>($[F.type]=$[F.type]||[],$[F.type].push(F),$),{}):a.actions=!1})}function M(){let g=We(R.value);return g.selectAll=!0,Y.axios.get(t.value,{params:g})}return{initIndex:H,initForm:U,getResource:L,setSearch:D,setLocale:C,setPage:A,setPageSize:S,selectAll:M,getResourceFilters:K,clearFilters:j,static:a,data:qe({resourceData:o,filterBadges:m,activeFilters:c,currentPage:s,perPage:i,total:u,loading:w})}},pr=xn(Ut),Nt=Ut,bo={class:"w-full flex flex-col"},wo={class:"p-3"},_o={class:"flex items-center justify-between gap-2"},xo={class:"bg-white px-2 pt-2"},ko={key:0,class:"flex items-center justify-center h-full"},So={class:"pagination px-2"},$o={class:"button-row"},Oo={class:"mr-2"},fr={__name:"ItemsSelector",props:{resourceHandle:String,exclude:Array,requestUrl:String,titleField:String,select:{type:Array,default:[]},columns:{type:Object,default:()=>({id:{label:"ID",sortable:!0,align:"center",width:70},title:{label:"Title",sortable:!0},created:{label:"Created"}})},singleSelect:{type:Boolean,default:!1},resources:{type:Array,default:[]},where:String},emits:["selected"],setup(e,{emit:n}){const t=e,o=n,a=E(!1),r=Nt(`items-${t.resourceHandle}`),s=E({handle:t.resourceHandle}),i=Q(()=>t.resources.length?s.value.titleField:t.titleField);Re(()=>{t.resources.length&&(s.value=t.resources[0]),r.setPage(1),c()});const l=E([]),d=m=>{l.value=m},u=Q(()=>l.value.map(m=>({id:m.id,[i.value]:m.title,item:Sn(m)}))),v=()=>{Invicta.emit("clear-filters"),o("selected",u.value)};function c(){a.value=!0;let m={paginate:!0,title:i.value,exclude:t.exclude};t.select.length&&(m.select=t.select),t.where!=""&&(m.where=t.where);let y=t.resources.length?`api/resource/${s.value.handle}/items`:t.requestUrl;Invicta.axios.get(y,{params:m}).then(({data:x})=>{r.initForm(y,x),r.getResourceFilters(s.value.handle),a.value=!1})}return(m,y)=>{const x=Je,w=Ge,_=Mt,C=ho,A=fo,S=Dt,P=Ht,D=Et,T=Pt,V=xe;return f(),k("div",bo,[h("header",wo,[h("div",_o,[e.resources.length?(f(),B(w,{key:0,modelValue:p(s),"onUpdate:modelValue":y[0]||(y[0]=j=>Te(s)?s.value=j:null),"value-key":"handle",teleported:!1,onChange:c},{default:O(()=>[(f(!0),k(J,null,fe(e.resources,j=>(f(),B(x,{key:j.handle,label:j.label,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):I("",!0),p(s).handle?(f(),B(_,{key:1,size:"default",handle:p(s).handle,onUpdate:p(r).setSearch},null,8,["handle","onUpdate"])):I("",!0),p(s).handle&&p(r).static.filters?(f(),B(C,{key:2,"resource-handle":p(s).handle,filters:p(r).static.filters,"active-filters":p(r).data.activeFilters},null,8,["resource-handle","filters","active-filters"])):I("",!0)])]),h("div",xo,[b(A,{badges:p(r).data.filterBadges},null,8,["badges"])]),h("main",null,[p(a)?(f(),k("div",ko,[b(S)])):(f(),B(D,{key:1},{default:O(()=>[b(P,{"resource-handle":p(s).handle,data:p(r).data.resourceData,columns:e.columns,"columns-select":!1,"no-actions":!0,"single-select":e.singleSelect,onSelect:d},null,8,["resource-handle","data","columns","single-select"])]),_:1}))]),h("footer",null,[h("div",So,[b(T,{background:"",size:"small",layout:"prev, pager, next, jumper","current-page":p(r).data.currentPage,"page-size":p(r).data.perPage,"pager-count":5,total:p(r).data.total,"onUpdate:pageSize":p(r).setPageSize,"onUpdate:currentPage":p(r).setPage},null,8,["current-page","page-size","total","onUpdate:pageSize","onUpdate:currentPage"])]),h("div",$o,[h("div",Oo,[y[2]||(y[2]=z("Total: ")),h("strong",null,X(p(r).total),1)]),b(V,{class:"ml-auto mr-2",text:"",onClick:y[1]||(y[1]=j=>m.$emit("cancel"))},{default:O(()=>y[3]||(y[3]=[z("Cancel")])),_:1}),b(V,{type:"primary",onClick:v},{default:O(()=>y[4]||(y[4]=[z("Select")])),_:1})])])])}}},Co={key:0,enctype:"multipart/form-data",novalidate:""},Ao=["multiple","accept","disabled"],Eo={key:0,class:"dropbox-initial"},Po={key:1,class:"dropbox-saving"},Do={key:1,class:"button-upload"},Bo=["multiple","accept","disabled"],Io={key:0,class:"el-icon is-loading"},jo={key:1,class:"el-icon"},Ro={key:2},To={__name:"Uploader",props:{type:{type:String,default:"button"},single:{type:Boolean,default:!1},folder:String},emits:["upload-complete","open-library"],setup(e,{emit:n}){const t=e,o=n,a=Invicta.getConfig("assetsSettings"),r=Q(()=>t.single?!1:a.multiupload),s=E(!0),i=E(!1),l=E(!1),d=E(),u=E(0),v=Q(()=>u.value==100?"Saving to database...":"Uploading to server..."),c=w=>{l.value=!1,s.value=!1,i.value=!0;const _=w.target.files.length!==0?w.target.files:w.dataTransfer.files;if(_.length!=0)for(let C of _)y(C)},m=()=>{d.value.value=null,d.value.click()};function y(w){d.value=null;let _=new FormData;_.append("file",w),t.folder&&t.folder!=""&&_.append("folder",t.folder);const C={onUploadProgress:A=>{A.lengthComputable&&(u.value=Math.round(A.loaded*100/A.total))}};Invicta.axios.post("/api/assets",_,C).then(({data:A})=>{Invicta.message(A.message),o("upload-complete",A.asset),Invicta.emit("refresh-resource"),x()}).catch(A=>{x()})}function x(){i.value=!1,s.value=!0}return(w,_)=>{const C=ke,A=En,S=xe;return f(),k("div",{class:de(["image-uploader",e.type])},[p(s)||p(i)?(f(),k("form",Co,[e.type=="drag"?(f(),k("div",{key:0,class:de(["dropbox",{"is-dragover":p(l),"is-initial":p(s)}]),onDrop:De(c,["prevent"]),onDragover:_[0]||(_[0]=De(P=>l.value=!0,["prevent"])),onDragleave:_[1]||(_[1]=De(P=>l.value=!1,["prevent"]))},[h("input",{type:"file",ref_key:"uploadInput",ref:d,multiple:p(r),accept:p(a).accept,class:"input-file",disabled:p(i),onChange:c},null,40,Ao),p(s)?(f(),k("div",Eo,[h("div",{class:"dropbox-text",onClick:m},[b(C,{icon:p($n)},null,8,["icon"]),_[3]||(_[3]=h("span",null,[z("Drop file here or "),h("strong",null,"click to select")],-1))])])):I("",!0),p(i)?(f(),k("div",Po,[b(A,{type:"circle",percentage:p(u)},null,8,["percentage"]),h("div",null,X(p(v)),1)])):I("",!0)],34)):(f(),k("div",Do,[h("span",{class:"el-button el-button--primary",onClick:m,title:"Upload new asset"},[h("input",{type:"file",ref_key:"uploadInput",ref:d,multiple:p(r),accept:p(a).accept,class:"input-file",disabled:p(i),onChange:c},null,40,Bo),p(i)?(f(),k("i",Io,[b(p(On))])):I("",!0),p(i)?I("",!0):(f(),k("i",jo,[b(p(Cn))])),e.type==="button"?(f(),k("span",Ro,"Upload")):I("",!0)]),e.type==="browse"?(f(),B(S,{key:0,icon:p(An),onClick:_[2]||(_[2]=P=>w.$emit("open-library"))},{default:O(()=>_[4]||(_[4]=[z("Media Library")])),_:1},8,["icon"])):I("",!0)]))])):I("",!0)],2)}}},Vo={class:"p-4"},Lo={class:"assets-grid"},Fo=["title"],Ho={class:"wrap"},Mo={class:"image-wrap"},Uo={key:0,class:"image-transparent-back"},No=["src"],zo={key:1,class:"p-6"},qo={key:2,class:"actions-layer"},Wo={key:3,class:"actions-layer"},Yo=["onClick"],Xo=["onClick"],Jo=["onClick","title"],Go=["onClick"],Ko={class:"media-details"},Qo={class:"name"},Zo={class:"bottom"},er={key:0},tr={__name:"GridView",props:{resource:Object,settings:Object,selector:{type:Boolean,default:!1}},setup(e){const n=e,t=Q(function(){return n.resource.data?n.resource.data:n.resource}),{isSupported:o,copy:a}=St();ft("clipboard-read"),ft("clipboard-write");const r=s=>window.open(s,"_blank");return(s,i)=>{const l=To,d=In,u=xe,v=ke;return f(),k("div",Vo,[e.selector?I("",!0):(f(),B(l,{key:0,type:"drag"})),h("div",Lo,[(f(!0),k(J,null,fe(p(t),(c,m)=>(f(),k("div",{class:"asset-card",key:c.path,title:c.img_name},[h("div",Ho,[h("div",Mo,[c.type=="image"?(f(),k("div",Uo,[h("img",{src:c.src},null,8,No)])):(f(),k("div",zo,[b(d,{rows:5})])),e.selector?(f(),k("div",qo,[c.type=="image"?(f(),B(u,{key:0,type:"primary",onClick:y=>s.$emit("asset-selected",c)},{default:O(()=>i[0]||(i[0]=[z("Select Image")])),_:2},1032,["onClick"])):I("",!0)])):(f(),k("div",Wo,[p(o)?(f(),k("span",{key:0,class:"copy-item",onClick:y=>p(a)(c.src),title:"Copy file path to clipboard"},[b(p($t))],8,Yo)):I("",!0),c.type=="image"&&e.settings.canEdit?(f(),k("span",{key:1,class:"preview-item",onClick:y=>s.$emit("edit",c.id),title:"Click to preview image"},[b(p(Pn))],8,Xo)):I("",!0),h("span",{class:"preview-item",onClick:y=>r(c.src),title:`Click to open ${c.type} in new tab`},[b(v,{icon:p(Dn)},null,8,["icon"])],8,Jo),e.settings.canDelete?(f(),k("span",{key:2,class:"delete-item",onClick:y=>s.$emit("delete",[c.id]),title:"Click to delete image"},[b(p(Bn))],8,Go)):I("",!0)]))]),h("div",Ko,[h("div",Qo,X(c.img_name),1),h("div",Zo,[c.type=="image"?(f(),k("span",er,X(c.dimensions)+"px",1)):I("",!0),h("span",null,X(c.size),1),h("span",null,X(c.created),1)])])])],8,Fo))),128))])])}}},nr={class:"w-full flex flex-col asset-library"},ar={class:"p-3"},or={class:"flex items-center justify-between"},rr={class:"ml-2"},sr={key:0,class:"flex items-center justify-center h-full"},ir={class:"pagination px-2"},vr={__name:"AssetSelector",emits:["selected"],setup(e,{emit:n}){const t=n,o=Nt("assets"),a=E(!1),r=E();Re(()=>{o.data.currentPage>1&&o.setPage(1),a.value=!0,r.value=Invicta.remember("media-layout")||"grid",Invicta.axios.get("api/resource/assets",{params:{settings:!0}}).then(({data:v})=>{a.value=!1,console.log("I got this data",v),o.initForm("api/resource/assets",v)})});const s=v=>{r.value=v,Invicta.remember("media-layout",v)},i=E([]),l=v=>{i.value={id:v.id,src:v.src,path:v.path,name:v.img_name,alt:v.alt,width:v.width,height:v.height}},d=v=>{l(v),u()};function u(){console.log("i shoudld submit selected asset",i.value),t("selected",i.value)}return(v,c)=>{const m=Mt,y=ke,x=xe,w=Tn,_=Dt,C=Ht,A=tr,S=Et,P=Pt;return f(),k("div",nr,[h("header",ar,[h("div",or,[b(m,{class:"flex-1",handle:"assets",onUpdate:p(o).setSearch},null,8,["onUpdate"]),h("div",rr,[b(w,null,{default:O(()=>[b(x,{onClick:c[0]||(c[0]=D=>s("list")),title:"List view",active:p(r)=="list"},{default:O(()=>[b(y,{icon:p(jn),width:16},null,8,["icon"])]),_:1},8,["active"]),b(x,{onClick:c[1]||(c[1]=D=>s("grid")),title:"Grid view",active:p(r)=="grid"},{default:O(()=>[b(y,{icon:p(Rn),width:16},null,8,["icon"])]),_:1},8,["active"])]),_:1})])])]),h("main",{class:de({loading:p(a),"assets grid":p(r)=="grid"})},[p(a)?(f(),k("div",sr,[b(_)])):(f(),B(S,{key:1},{default:O(()=>[!p(a)&&p(r)=="list"?(f(),B(C,{key:0,"resource-handle":"assets",data:p(o).data.resourceData,columns:p(o).static.settings.columns,"no-actions":!0,"single-select":!0,onSingleSelect:l},null,8,["data","columns"])):I("",!0),!p(a)&&p(r)=="grid"?(f(),B(A,{key:1,resource:p(o).data.resourceData,selector:!0,onAssetSelected:d},null,8,["resource"])):I("",!0)]),_:1}))],2),h("footer",null,[h("div",ir,[b(P,{background:"",size:"small",layout:"prev, pager, next, jumper, sizes","current-page":p(o).data.currentPage,"onUpdate:currentPage":c[2]||(c[2]=D=>p(o).data.currentPage=D),"page-size":p(o).data.perPage,"onUpdate:pageSize":c[3]||(c[3]=D=>p(o).data.perPage=D),total:p(o).data.total,onCurrentChange:p(o).setPage},null,8,["current-page","page-size","total","onCurrentChange"])])])])}}};export{To as _,vr as a,dr as b,Ja as c,fr as d,Ht as e,tr as f,Mt as g,fo as h,ho as i,Nt as j,pr as u};
