import{_ as L}from"./FieldBase-DA-QK4G3.js";import{u as j,g as q,c as E}from"./FormBase-DY-dloLv.js";import{u as P}from"./field-CUKXCLJF.js";import{o as l,e as k,l as v,w as u,i as m,g as h,h as w,f as x,u as i,X as U,B as O,t as F,bu as S,ah as R,D as I,b3 as H,n as z,Y as X,y as D,I as Y,F as G,q as J}from"./vendor-CKoRGJ0e.js";import{b as K}from"./main-NVFK8y-D.js";import{d as T,_ as V}from"./vuedraggable.umd-BjS9rNfs.js";import"./dropdown-menu-DkWoAgjh.js";import"./Loading-Bgf6Mezb.js";/* empty css             */const M={class:"inline-repeater-field"},Q={class:"field-row flex items-center"},W={key:0,class:"mt-3"},Z={__name:"InlineRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:String,itemTitle:Function,panelClass:String,disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:n}){const t=e,f=n,p=t.list.length?t.list[0]:t.default;function r(){let a=S(p),o=[...R(t.list),a];f("updated",o)}function _(a){t.list.splice(a,1),f("updated",[...t.list])}return(a,s)=>{const o=V,g=K,c=I;return l(),k("div",M,[v(i(T),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:s[0]||(s[0]=d=>a.$emit("updated",e.list))},{item:u(({element:d,index:$})=>[m("div",Q,[!e.disableDraggable&&!e.readOnly?(l(),h(o,{key:0,class:"handle cursor-grab opacity-50"})):w("",!0),x(a.$slots,"default",{item:d,index:$}),e.readOnly?w("",!0):(l(),h(c,{key:1,text:"",onClick:y=>_($)},{default:u(()=>[v(g,{icon:i(U),width:18},null,8,["icon"])]),_:2},1032,["onClick"]))])]),_:3},8,["list","disabled"]),e.readOnly?w("",!0):(l(),k("div",W,[v(c,{type:"primary",onClick:r},{default:u(()=>[O("Add "+F(e.itemName),1)]),_:1})]))])}}},ee={class:"repeater-field"},te={class:"accordion inner"},ae=["name","disabled"],le={class:"ms-2 summary-text"},ne={class:"details-body"},ie={class:"flex-full text-end mt-2"},se={key:0,class:"mt-3"},de={__name:"CollapseRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:{type:String,default:"row"},itemTitle:{type:Function,default(e,n){return"Empty"}},panelClass:{type:String,default:""},disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:n}){const t=e,f=n,p=t.list.length?t.list[0]:t.default;function r(){let a=S(p),o=[...R(t.list),a];f("updated",o)}function _(a){t.list.splice(a,1)}return(a,s)=>{const o=V,g=I;return l(),k("div",ee,[m("div",te,[v(i(T),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:s[0]||(s[0]=c=>a.$emit("updated",e.list))},{item:u(({element:c,index:d})=>[m("details",{name:d,disabled:e.readOnly},[m("summary",null,[e.disableDraggable?w("",!0):(l(),h(o,{key:0})),m("span",le,F(e.itemTitle(c,d)),1),e.readOnly?w("",!0):(l(),h(g,{key:1,type:"danger",text:"",icon:i(H),onClick:$=>_(d)},null,8,["icon","onClick"]))]),m("div",ne,[m("div",{class:z(e.panelClass)},[x(a.$slots,"default",{item:c,index:d}),m("div",ie,[v(g,{type:"danger",text:"",onClick:$=>_(d),icon:i(X)},{default:u(()=>[O(" Remove "+F(e.itemName),1)]),_:2},1032,["onClick","icon"])])],2)])],8,ae)]),_:3},8,["list","disabled"])]),e.readOnly?w("",!0):(l(),k("div",se,[v(g,{type:"primary",onClick:r},{default:u(()=>[O("Add "+F(e.itemName),1)]),_:1})]))])}}},be={__name:"repeaterField",props:{formId:String,data:Object,path:String},setup(e){const n=e,{data:t,path:f}=n,p=j(n.formId),r=P(n),_=D(()=>r.get("inline",!1)?Z:de),a=!r.get("draggable",!0),s=D(()=>q(t.fields)),o=D(()=>p.get(n.path,[s.value])),g=r.get("itemName","row");function c(y,b){let C="titleField"in t?t.titleField:"title",B=[f,b,C];return p.get(B.join("."),`${C} #${b}`)}const d=(y,b)=>`${f}.${b}.${y}`;function $(y){let b=[...R(y)];p.set(n.path,b)}return(y,b)=>{const C=E,B=L;return l(),h(B,{"form-id":e.formId,"field-props":n},{default:u(()=>[(l(),h(Y(i(_)),{list:i(o),"item-name":i(g),"item-title":c,"default-row":i(s),"disable-draggable":a,"read-only":i(r).disabled,"panel-class":"group",onUpdated:$},{default:u(A=>[(l(!0),k(G,null,J(i(t).fields,N=>(l(),h(C,{"form-id":e.formId,"field-data":N,"data-path":d(N.id,A.index)},null,8,["form-id","field-data","data-path"]))),256))]),_:1},40,["list","item-name","default-row","read-only"]))]),_:1},8,["form-id","field-props"])}}};export{be as default};
