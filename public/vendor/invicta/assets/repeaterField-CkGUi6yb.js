import{_ as E}from"./FieldBase-DdKDcODU.js";import{u as L,g as j,c as q}from"./FormBase-BoobTqgr.js";import{u as P}from"./field-C2gsCxNh.js";import{o as n,e as k,l as f,w as s,i as v,g as b,h as $,f as S,u as o,X as U,B as O,t as F,bu as x,ah as R,D as I,b3 as z,n as H,Y as X,bv as Y,bw as G,y as D,I as J,F as K,q as M}from"./vendor-Ci2skXiS.js";import{b as Q}from"./main-BCEgg6q-.js";import{d as T,_ as V}from"./vuedraggable.umd-CANZ7DOw.js";import"./dropdown-menu-BIYjDwrS.js";import"./Loading-BjVsGdfx.js";/* empty css             */const W={class:"inline-repeater-field"},Z={class:"field-row flex items-center"},ee={key:0,class:"mt-3"},te={__name:"InlineRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:String,itemTitle:Function,panelClass:String,disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,p=i,g=t.list.length?t.list[0]:t.default;function m(){let a=x(g),r=[...R(t.list),a];p("updated",r)}function _(a){t.list.splice(a,1),p("updated",[...t.list])}return(a,d)=>{const r=V,y=Q,h=I;return n(),k("div",W,[f(o(T),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:d[0]||(d[0]=w=>a.$emit("updated",e.list))},{item:s(({element:w,index:u})=>[v("div",Z,[!e.disableDraggable&&!e.readOnly?(n(),b(r,{key:0,class:"handle cursor-grab opacity-50"})):$("",!0),S(a.$slots,"default",{item:w,index:u}),e.readOnly?$("",!0):(n(),b(h,{key:1,text:"",onClick:l=>_(u)},{default:s(()=>[f(y,{icon:o(U),width:18},null,8,["icon"])]),_:2},1032,["onClick"]))])]),_:3},8,["list","disabled"]),e.readOnly?$("",!0):(n(),k("div",ee,[f(h,{type:"primary",onClick:m},{default:s(()=>[O("Add "+F(e.itemName),1)]),_:1})]))])}}},ae={class:"repeater-field"},le={class:"ml-2"},ne={class:"delete-row-button ml-auto mr-4"},ie={class:"flex-1 text-right"},se={key:0,class:"mt-3"},oe={__name:"CollapseRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:{type:String,default:"row"},itemTitle:{type:Function,default(e,i){return"Empty"}},panelClass:{type:String,default:""},disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,p=i,g=t.list.length?t.list[0]:t.default;function m(){let a=x(g),r=[...R(t.list),a];p("updated",r)}function _(a){t.list.splice(a,1)}return(a,d)=>{const r=V,y=I,h=Y,w=G;return n(),k("div",ae,[f(w,{accordion:""},{default:s(()=>[f(o(T),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:d[0]||(d[0]=u=>a.$emit("updated",e.list))},{item:s(({element:u,index:l})=>[f(h,{name:l,disabled:e.readOnly},{title:s(()=>[e.disableDraggable?$("",!0):(n(),b(r,{key:0,class:"handle cursor-grab"})),v("span",le,F(e.itemTitle(u,l)),1),v("div",ne,[e.readOnly?$("",!0):(n(),b(y,{key:0,text:"",icon:o(z),onClick:c=>_(l)},null,8,["icon","onClick"]))])]),default:s(()=>[v("div",{class:H(["panel py-3",e.panelClass])},[v("div",ie,[f(y,{type:"danger",text:"",size:"small",icon:o(X),onClick:c=>_(l)},{default:s(()=>[O("Remove "+F(e.itemName),1)]),_:2},1032,["icon","onClick"])]),S(a.$slots,"default",{item:u,index:l})],2)]),_:2},1032,["name","disabled"])]),_:3},8,["list","disabled"])]),_:3}),e.readOnly?$("",!0):(n(),k("div",se,[f(y,{type:"primary",onClick:m},{default:s(()=>[O("Add "+F(e.itemName),1)]),_:1})]))])}}},be={__name:"repeaterField",props:{formId:String,data:Object,path:String},setup(e){const i=e,{data:t,path:p}=i,g=L(i.formId),m=P(i),_=D(()=>m.get("inline",!1)?te:oe),a=!m.get("draggable",!0),d=D(()=>j(t.fields)),r=D(()=>g.get(i.path,[d.value])),y=m.get("itemName","row");function h(l,c){let C="titleField"in t?t.titleField:"title",B=[p,c,C];return g.get(B.join("."),`${C} #${c}`)}const w=(l,c)=>`${p}.${c}.${l}`;function u(l){let c=[...R(l)];g.set(i.path,c)}return(l,c)=>{const C=q,B=E;return n(),b(B,{"form-id":e.formId,"field-props":i},{default:s(()=>[(n(),b(J(o(_)),{list:o(r),"item-name":o(y),"item-title":h,"default-row":o(d),"disable-draggable":a,"read-only":o(m).disabled,"panel-class":"group",onUpdated:u},{default:s(A=>[(n(!0),k(K,null,M(o(t).fields,N=>(n(),b(C,{"form-id":e.formId,"field-data":N,"data-path":w(N.id,A.index)},null,8,["form-id","field-data","data-path"]))),256))]),_:1},40,["list","item-name","default-row","read-only"]))]),_:1},8,["form-id","field-props"])}}};export{be as default};
