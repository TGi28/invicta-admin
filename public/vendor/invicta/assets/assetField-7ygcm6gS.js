import{_ as S}from"./Drawer-BxPEu8tM.js";import{_ as I}from"./AssetForm-6ssPU0Nz.js";import{_ as N}from"./AssetSelector-BRGsKKrN.js";import{_ as V}from"./FieldBase-CJqAS9Xu.js";import{_ as D}from"./GridView-B7zsZOiD.js";import{a as T}from"./main-bEgEWTd2.js";import{_ as z}from"./resource-CxGGqGWg.js";import{u as O}from"./field-B4hST7Z8.js";import{u as E}from"./FormBase-DYw9ghXD.js";import{V as L,o as a,d as u,k as b,w as x,u as t,h as p,t as c,B as U,f as m,g as r,W as j,i as M,F as R,ac as W}from"./vendor-DNNQIDVf.js";import{f as q}from"./functions-D7TSWOGs.js";/* empty css               */import"./CheckTree-DMv88Hj1.js";/* empty css                 *//* empty css                  *//* empty css                 *//* empty css                      *//* empty css             */import"./dynamic-import-helper-BheWnx7M.js";const G={key:0,class:"asset-wrap"},H=["src"],J={class:"asset-details mr-auto"},K={key:2,class:"asset-wrap"},yt={__name:"assetField",props:{formId:String,data:Object,path:String},setup(f){const _=f,i=O(_),e=i.value(),g=E(_.formId).remoteData.get("assetActions"),s=L({state:!1,context:"library"}),v=n=>{e.value=n,s.state=!1},k=()=>{i.disabled||(s.context="edit",s.state=!0)},h=({action:n,item:o})=>{console.log("action call",n,o),W.confirm("Are you sure you want to run this action?",n.name,{confirmButtonText:n.action_button,cancelButtonText:"Cancel",confirmButtonClass:n.dangerous?"el-button--danger":"el-button--primary"}).then(()=>{let y={class:n.class,selected:[o.id]};Invicta.axios.post("api/resource/assets/actions",y).then(({data:d})=>{Invicta.message(d.message),e.value=d.asset})}).catch(()=>console.log("cancel"))},w=()=>{s.context="library",s.state=!0};return(n,o)=>{const y=z,d=T,B=D,C=V,F=N,$=I,A=S;return a(),u(R,null,[b(C,{"form-id":f.formId,"field-props":_},{default:x(()=>{var l;return[t(e)?(a(),u("div",G,[p("div",{class:"asset",onClick:k},[p("img",{src:t(e).src},null,8,H)]),p("div",J,[p("strong",null,c(t(e).name),1),U(" "+c(t(e).width)+"x"+c(t(e).height)+" | "+c(t(e).size?t(q)(t(e).size):"n/a")+" "+c(t(e).alt?t(e).alt:"No Alt!"),1)]),t(g).length?(a(),m(y,{key:0,actions:t(g),item:t(e),onSelected:h,class:"mr-3"},null,8,["actions","item"])):r("",!0),t(i).disabled?r("",!0):(a(),u("span",{key:1,class:"mr-3 action-icon",onClick:o[0]||(o[0]=Q=>e.value=null)},[b(d,{icon:t(j),width:18},null,8,["icon"])]))])):t(i).disabled?t(i).disabled?(a(),u("div",K,"No image")):r("",!0):(a(),m(B,{key:1,type:"browse",onUploadComplete:v,onOpenLibrary:w,single:!0,folder:((l=f.data.props)==null?void 0:l.folder)||null},null,8,["folder"]))]}),_:1},8,["form-id","field-props"]),t(s).state?(a(),m(A,{key:0,onClose:o[3]||(o[3]=l=>t(s).state=!1),style:M({width:t(s).context=="library"?"80%":""})},{default:x(()=>[t(s).context=="library"?(a(),m(F,{key:0,onSelected:v,onCancel:o[1]||(o[1]=l=>t(s).state=!1)})):r("",!0),t(s).context=="edit"?(a(),m($,{key:1,asset:t(e),onClose:o[2]||(o[2]=l=>t(s).state=!1)},null,8,["asset"])):r("",!0)]),_:1},8,["style"])):r("",!0)],64)}}};export{yt as default};
