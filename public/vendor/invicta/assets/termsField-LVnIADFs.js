import{_ as b}from"./FieldBase-CWpNOju6.js";import{y as F,j as I,L as C,o as c,f as V,w as h,d as p,F as w,p as B,u as l,n as _,h as d,t as P,aL as S,k as v,bx as $,g as L,A as M}from"./vendor-DJE8ga0U.js";import{b as N}from"./main-DLr3PIp-.js";import{u as j}from"./FormBase-COs1Cf47.js";import{u as E}from"./field-CVydi8wp.js";import"./dropdown-menu-By3p2g81.js";import"./Loading-BFgnQjTV.js";/* empty css             */const O=["value","id","checked"],z=["for"],A=["onClick"],X={__name:"termsField",props:{formId:String,data:Object,path:String},setup(u){const r=u,n=j(r.formId),o=E(r).value([]),i=F(()=>o.value.map(a=>a.id)),k=a=>{let e=parseInt(a.target.value);o.value.length||(o.value=[]),i.value.includes(e)?o.value=o.value.filter(s=>s.id!==e):(console.log("we should push here"),o.value.push({id:e,pivot:{primary:0}}))},m=a=>{let e=o.value.filter(s=>s.id==a)[0];return e?e.pivot.primary==1:!1},g=a=>{o.value=o.value.map(s=>(s.pivot.primary=s.id==a?1:0,s));let e={resource:n.settings.handle,resource_id:n.settings.id,related:r.data.id,term_id:a,sync:[...i.value]};Invicta.axios.post(r.data.options,e)},f=I();return C(()=>{let a=n.settings.handle;Invicta.axios.get(r.data.options,{params:{resource:a,locale:n.settings.currentLocale}}).then(({data:e})=>{console.log("I got this for categories",e),f.value=e})}),(a,e)=>{const s=N,x=M,y=b;return c(),V(y,{"form-id":u.formId,"field-props":r,class:"checkbox-group stacked"},{default:h(()=>[(c(!0),p(w,null,B(l(f),(t,R)=>(c(),p("label",{class:_(["el-checkbox el-checkbox--large !mx-0",{"is-checked":l(i).includes(t.id),primary:m(t.id)}])},[d("span",{class:_(["el-checkbox__input",{"is-checked":l(i).includes(t.id)}])},[d("input",{class:"el-checkbox__original",type:"checkbox",value:t.id,id:`term-${t.id}`,checked:l(i).includes(t.id),onChange:k},null,40,O),e[0]||(e[0]=d("span",{class:"el-checkbox__inner"},null,-1))],2),d("label",{for:`term-${t.id}`,class:"el-checkbox__label"},P(t.title),9,z),u.data.hasPrimary&&l(i).includes(t.id)&&l(n).settings.mode==="edit"?(c(),p("span",{key:0,class:"ml-auto make-primary",onClick:S(T=>g(t.id),["prevent"])},[v(x,{content:m(t.id)?"Primary":"Make Primary",placement:"left"},{default:h(()=>[v(s,{icon:l($),width:16,class:"action-icon"},null,8,["icon"])]),_:2},1032,["content"])],8,A)):L("",!0)],2))),256))]),_:1},8,["form-id","field-props"])}}};export{X as default};
