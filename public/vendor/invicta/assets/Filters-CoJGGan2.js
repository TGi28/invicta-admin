import{y as x,a5 as $,o as r,d as h,p as V,f as m,w as _,B,t as O,u as v,F as g,bl as I,j as b,ag as C,aS as j,aF as D,aG as H,x as E,k as S,bm as A,h as F,n as N,g as k,D as Y}from"./vendor-DNNQIDVf.js";/* empty css               */import{d as w}from"./resource-CxGGqGWg.js";/* empty css                    */import{a as M}from"./main-bEgEWTd2.js";const J={__name:"FilterBadges",props:{badges:Object},setup(a){const u=a,l=x(()=>$(u.badges,(e,i)=>{let o=Array.isArray(e.value)?e.value.join(", "):e.value;return{handle:i,badge:`${e.name}: ${o}`}})),d=e=>Invicta.emit("remove-filter",e);return(e,i)=>{const o=I;return r(!0),h(g,null,V(v(l),(s,n)=>(r(),m(o,{key:n,class:"mx-1",closable:"",onClose:c=>d(s.handle)},{default:_(()=>[B(O(s.badge),1)]),_:2},1032,["onClose"]))),128)}}},T={__name:"DateFilter",props:{handle:String,resourceHandle:String,type:String,initialValue:Array},emits:["selected"],setup(a,{emit:u}){const l=a,d=u,e=b(l.initialValue),i=()=>{let o={};o[l.handle]=e.value,Invicta.emit("update-filters",{filter:o,handle:l.resourceHandle}),d("selected")};return Invicta.on("remove-filter",o=>{o==l.handle&&(e.value=[],i())}),Invicta.on("clear-filters",()=>{e.value=[]}),(o,s)=>{const n=j;return r(),m(n,{modelValue:v(e),"onUpdate:modelValue":s[0]||(s[0]=c=>C(e)?e.value=c:null),type:a.type,"value-format":"YYYY-MM-DD",onChange:i},null,8,["modelValue","type"])}}},U={__name:"SelectFilter",props:{filterOptions:Array,handle:String,resourceHandle:String,initialValue:String|Object,remote:Boolean},emits:["selected"],setup(a,{emit:u}){const l=a,d=u,e=b(l.initialValue),i=b(l.filterOptions),o=n=>{let c={handle:l.handle,search:n};Invicta.axios.get("api/fields/filter/options",{params:c}).then(({data:p})=>{console.log("got results for options",p),i.value=p})},s=()=>{let n={};n[l.handle]=e.value,console.log("this is my value",e.value,n),Invicta.emit("update-filters",{filter:n,handle:l.resourceHandle}),d("selected")};return Invicta.on("remove-filter",n=>{n==l.handle&&(e.value="",s())}),Invicta.on("clear-filters",()=>{e.value=""}),(n,c)=>{const p=D,f=H;return r(),m(f,{modelValue:v(e),"onUpdate:modelValue":c[0]||(c[0]=t=>C(e)?e.value=t:null),clearable:"","collapse-tags":"",filterable:a.remote,remote:a.remote,"remote-method":o,"value-key":a.remote?"id":null,placeholder:"Select",teleported:!1,onChange:s},{default:_(()=>[(r(!0),h(g,null,V(v(i),(t,y)=>(r(),m(p,{key:y,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","filterable","remote","value-key"])}}},z={class:"p-3"},K={__name:"Filters",props:{resourceHandle:String,filters:Array,activeFilters:Object},setup(a){E(e=>({"8f771d6c":v(l)}));const u=a,l=x(()=>Object.keys(u.activeFilters).length?"var(--el-color-primary)":"var(--el-text-color-regular)"),d=e=>e in u.activeFilters?"active-filter":"";return(e,i)=>{const o=M,s=Y,n=U,c=T,p=w;return r(),m(p,null,{trigger:_(()=>[S(s,{class:"filter-state"},{default:_(()=>[S(o,{icon:v(A),width:18,height:18},null,8,["icon"])]),_:1})]),default:_(f=>[F("div",z,[(r(!0),h(g,null,V(a.filters,t=>(r(),h(g,null,[F("h4",{class:N(["mb-1",d(t.class)])},O(t.name),3),t.type=="select"?(r(),m(n,{key:0,class:"mb-4",handle:t.class,"resource-handle":a.resourceHandle,remote:t.remote,"filter-options":t.options,"initial-value":t.initialValue,onSelected:y=>f.close()},null,8,["handle","resource-handle","remote","filter-options","initial-value","onSelected"])):k("",!0),t.type=="date"||t.type=="daterange"?(r(),m(c,{key:1,handle:t.class,"resource-handle":a.resourceHandle,type:t.type,"initial-value":t.initialValue==""?[]:t.initialValue,onSelected:y=>f.close()},null,8,["handle","resource-handle","type","initial-value","onSelected"])):k("",!0)],64))),256))])]),_:1})}}};export{J as _,K as a};
