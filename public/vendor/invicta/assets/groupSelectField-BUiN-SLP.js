import{_ as E}from"./FieldBase-CJqAS9Xu.js";import{j as _,o,f as c,w as u,k as j,aw as D,u as l,ag as G,h as b,t as F,d as m,g as k,F as h,p as B,aF as L,aU as R,aG as C}from"./vendor-DNNQIDVf.js";/* empty css               */import{u as P}from"./FormBase-DYw9ghXD.js";import{u as U}from"./field-B4hST7Z8.js";/* empty css                  *//* empty css                      *//* empty css             */import"./main-bEgEWTd2.js";import"./dynamic-import-helper-BheWnx7M.js";const z={class:"flex justify-between"},K={key:0,class:"opacity-50"},Z={__name:"groupSelectField",props:{formId:String,data:Object,path:String},setup(i){var v;const e=i,r=_(!1),f=P(e.formId),g=U(e),p=g.value(),s=_([]),O=e.data.valueField||"value",V=e.data.labelField||"label";if(console.log("initializing the group select field",e.data.id),Array.isArray(e.data.options))s.value=e.data.options,r.value=!0;else if(!((v=e.data.props)!=null&&v.remote)){let a=f.remoteData.get(e.data.options);Array.isArray(a)?(s.value=y(a),r.value=!0,console.log("group options are ready",e.data.id)):(console.log("group options are NOT ready",e.data.id),Invicta.on(e.data.options,()=>{s.value=y(f.remoteData.get(e.data.options)),r.value=!0,console.log("group options are FINALLY ready",e.data.id)}))}function y(a){return e.data.hasOwnProperty("filterBy")?a.filter(d=>e.data.filterBy.includes(d.handle)):a}function I(){Invicta.axios.get(e.data.options).then(({data:a})=>{s.value=a,r.value=!0})}return(a,d)=>{const w=L,x=R,A=C,N=E;return o(),c(N,{"form-id":i.formId,"field-props":e},{default:u(()=>[j(A,D({modelValue:l(p),"onUpdate:modelValue":d[0]||(d[0]=t=>G(p)?p.value=t:null)},i.data.props,{"value-key":i.data.valueKey||null,teleported:!1,"remote-method":I,disabled:l(g).disabled}),{label:u(({label:t,value:n})=>[b("div",z,[b("span",null,F(t),1),n.group?(o(),m("span",K,F(n.group),1)):k("",!0)])]),default:u(()=>[l(r)?(o(!0),m(h,{key:0},B(l(s),t=>(o(),c(x,{key:t.label,label:t.label},{default:u(()=>[(o(!0),m(h,null,B(t.options,(n,S)=>(o(),c(w,{key:S,value:n[l(O)],label:n[l(V)]},null,8,["value","label"]))),128))]),_:2},1032,["label"]))),128)):k("",!0)]),_:1},16,["modelValue","value-key","disabled"])]),_:1},8,["form-id","field-props"])}}};export{Z as default};
